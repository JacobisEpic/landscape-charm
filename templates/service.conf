{% set postgres = db[0] %}
{% set rabbitmq = amqp[0] %}
[global]
# Syslog address is either a socket path or server:port string.
syslog-address = /dev/log

[stores]
host = {{ postgres["host"] }}:{{ postgres["port"] }}
user = landscape
password = {{ leader["database-password"] }}
main = landscape-main
account-1 = landscape-account-1
resource-1 = landscape-resource-1
package = landscape-package
session = landscape-session
session-autocommit = landscape-session?isolation=autocommit
knowledge = landscape-knowledge

[broker]
port = 5672
host = {{ rabbitmq["hostname"] }}
user = landscape
password = {{ rabbitmq["password"] }}
vhost = landscape

[schema]
threads = 1
stores = main account-1 resource-1 package session knowledge
store_user = {{ postgres["user"] }}
store_password = {{ postgres["password"] }}

[landscape]
base-port = 8080
threads = 8
stores = main account-1 resource-1 package session session-autocommit knowledge
mailer = queue
mailer-path = /var/lib/landscape/landscape-mail-queue
reprepro-binary = /opt/canonical/landscape/scripts/reprepro-wrapper.sh
repository-path = /var/lib/landscape/landscape-repository

[async-frontend]
base-port = 9090

[job-handler]
stores = main account-1 resource-1 package
threads = 10
mailer = queue
mailer-path = /var/lib/landscape/landscape-mail-queue
