#!/bin/bash -e
# Needs to be run as a user who can sudo.  d'oh!
# It will ask your password a lot.

CODENAME=$(lsb_release -cs)

# Install add-apt-repository (packaging differs across releases).
sudo apt-get -y install software-properties-common

# Add the juju stable ppa, install charm-tools (juju-test plugin) and other deps
sudo add-apt-repository -y ppa:juju/stable
sudo apt-get update
sudo apt-get -y install juju-2.0 python3 \
    python3-yaml curl python3-zope.testrunner \
    python3-fixtures python3-jinja2 python3-fixtures \
    python3-psutil python3-twisted python3-flake8 \
    python3-path python3-libcharmstore python3-zope.testrunner python3-six \
    python-twisted-core python3-pip

sudo apt-get -y install python-fixtures python-six python-yaml dpkg-dev \
    pbuilder dh-make python-jinja2 python-psutil python-six

if [ $CODENAME != "trusty" ]; then
    sudo apt-get -y install flake8
fi
